<Page x:Class="GitDeployPro.Pages.HistoryPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
      Title="HistoryPage"
      Background="#202020">
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,25">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <StackPanel Grid.Column="0" Orientation="Horizontal">
                <TextBlock Text="ðŸ“œ" FontSize="40" VerticalAlignment="Center" Margin="0,0,15,0" Foreground="White"/>
                <TextBlock Text="Deployment History" 
                          FontSize="34" 
                          FontWeight="Bold" 
                          Foreground="White"
                          VerticalAlignment="Center"/>
            </StackPanel>

            <Button Grid.Column="1"
                   Height="42"
                   Padding="20,0"
                   Background="#0078D4"
                   Foreground="White"
                   FontSize="13"
                   FontWeight="SemiBold"
                   BorderThickness="0"
                   Cursor="Hand"
                   Click="Refresh_Click">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ðŸ”„" FontSize="16" VerticalAlignment="Center" Margin="0,0,8,0" Foreground="White"/>
                    <TextBlock Text="Refresh" VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </Grid>

        <!-- History List -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <ItemsControl x:Name="HistoryItemsControl">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#2B2B2B" 
                               CornerRadius="10" 
                               Padding="20" 
                               Margin="0,0,0,12">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Icon Circle -->
                                <Border Grid.Row="0" Grid.Column="0" Grid.RowSpan="2"
                                       Background="{Binding StatusColor}" 
                                       CornerRadius="30" 
                                       Width="50" 
                                       Height="50"
                                       Margin="0,0,15,0"
                                       VerticalAlignment="Top">
                                    <TextBlock Text="{Binding Icon}" 
                                              FontSize="26" 
                                              HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Foreground="White"/>
                                </Border>

                                <!-- Title -->
                                <TextBlock Grid.Row="0" Grid.Column="1"
                                          Text="{Binding Title}" 
                                          FontSize="17" 
                                          FontWeight="SemiBold"
                                          Foreground="White"/>

                                <!-- Status Badge -->
                                <Border Grid.Row="0" Grid.Column="2" 
                                       Background="{Binding StatusColor}" 
                                       CornerRadius="4" 
                                       Padding="12,6"
                                       VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Status}" 
                                              Foreground="White" 
                                              FontSize="12" 
                                              FontWeight="Bold"/>
                                </Border>

                                <!-- Details -->
                                <TextBlock Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"
                                          Text="{Binding Details}" 
                                          FontSize="13" 
                                          Foreground="#AAAAAA" 
                                          Margin="0,6,0,12"/>

                                <!-- Actions -->
                                <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3" 
                                           Orientation="Horizontal" 
                                           Margin="0,8,0,0">
                                    <Button Height="36" 
                                           Padding="16,0"
                                           Margin="0,0,10,0"
                                           Background="#3A3A3A"
                                           Foreground="#CCCCCC"
                                           FontSize="12"
                                           BorderThickness="0"
                                           Cursor="Hand"
                                           Click="Details_Click"
                                           Tag="{Binding Id}">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="ðŸ“‹" FontSize="14" VerticalAlignment="Center" Margin="0,0,6,0" Foreground="White"/>
                                            <TextBlock Text="Details" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                    <Button Height="36" 
                                           Padding="16,0"
                                           Background="#3A3A3A"
                                           Foreground="#CCCCCC"
                                           FontSize="12"
                                           BorderThickness="0"
                                           Cursor="Hand"
                                           Click="Rollback_Click"
                                           Tag="{Binding Id}">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="â†©ï¸" FontSize="14" VerticalAlignment="Center" Margin="0,0,6,0" Foreground="White"/>
                                            <TextBlock Text="Rollback" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>
    </Grid>
</Page>
