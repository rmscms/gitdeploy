<Page x:Class="GitDeployPro.Pages.BackupSchedulerPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
      Title="Backup Scheduler"
      Background="#1F1F1F">
    <Page.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
        <LinearGradientBrush x:Key="EditorCardBrush" StartPoint="0,0" EndPoint="1,1">
            <GradientStop Color="#2A2A2A" Offset="0"/>
            <GradientStop Color="#1C1C1C" Offset="1"/>
        </LinearGradientBrush>
        <Style x:Key="WidgetCardStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource EditorCardBrush}"/>
            <Setter Property="CornerRadius" Value="14"/>
            <Setter Property="Padding" Value="16"/>
            <Setter Property="Margin" Value="0,0,0,15"/>
            <Setter Property="BorderBrush" Value="#2F2F2F"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
        </Style>
        <Style x:Key="PrimaryPillButton" TargetType="Button">
            <Setter Property="Width" Value="95"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Background" Value="#1E88FF"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="SecondaryPillButton" TargetType="Button" BasedOn="{StaticResource PrimaryPillButton}">
            <Setter Property="Background" Value="#8E43FF"/>
        </Style>
        <Style x:Key="DangerPillButton" TargetType="Button" BasedOn="{StaticResource PrimaryPillButton}">
            <Setter Property="Background" Value="#E74444"/>
        </Style>
        <Style x:Key="SquareIconButton" TargetType="Button">
            <Setter Property="Width" Value="46"/>
            <Setter Property="Height" Value="42"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="10">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ToggleChipStyle" TargetType="ToggleButton">
            <Setter Property="Margin" Value="4"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="#E5E5E5"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border x:Name="Chip"
                                Background="#2F2F2F"
                                CornerRadius="18"
                                BorderBrush="#3C3C3C"
                                BorderThickness="1">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Chip" Property="Background" Value="#0FB981"/>
                                <Setter Property="Foreground" Value="#0D0D0D"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Chip" Property="BorderBrush" Value="#4B8FE2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>
    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="ðŸ—“ï¸" FontSize="34" Margin="0,0,12,0" VerticalAlignment="Center"/>
                <StackPanel>
                    <TextBlock Text="Backup Scheduler" FontSize="32" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="Define multiple database export plans with independent cadences."
                               FontSize="13"
                               Foreground="#D0D0D0"/>
                </StackPanel>
            </StackPanel>
            <Button Content="ðŸ—– Pop-out"
                    Grid.Column="1"
                    Padding="16,8"
                    Margin="12,0,0,0"
                    Background="#333333"
                    Foreground="#FFFFFF"
                    BorderThickness="0"
                    Cursor="Hand"
                    Click="OpenInWindow_Click"/>
        </Grid>

        <!-- Body -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Schedule list -->
            <Border Background="#252525" CornerRadius="10" Padding="15" Grid.Column="0" Margin="0,0,25,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                        <TextBlock Text="Schedules" FontSize="18" FontWeight="SemiBold" Foreground="White"/>
                        <Border Background="#3A3A3A" CornerRadius="6" Padding="6,2" Margin="10,0,0,0">
                            <TextBlock Text="{Binding Schedules.Count}" Foreground="#9CFFCB" FontWeight="Bold"/>
                        </Border>
                    </StackPanel>
                    <ListBox x:Name="SchedulesList"
                             Grid.Row="1"
                             ItemsSource="{Binding Schedules}"
                             SelectedItem="{Binding SelectedSchedule, Mode=TwoWay}"
                             Background="Transparent"
                             BorderThickness="0">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="#2E2E2E"
                                        CornerRadius="8"
                                        Padding="12"
                                        Margin="0,4">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding Name}" FontSize="14" Foreground="White" FontWeight="SemiBold"/>
                                            <TextBlock Text="{Binding Enabled, StringFormat= (Enabled: {0})}"
                                                       FontSize="11"
                                                       Foreground="#A0A0A0"
                                                       Margin="10,0,0,0"/>
                                        </StackPanel>
                                        <TextBlock Text="{Binding Frequency}"
                                                   FontSize="12"
                                                   Foreground="#BBBBBB"/>
                                        <TextBlock Text="{Binding NextRunLocal, StringFormat=Next: {0:G}}"
                                                   FontSize="11"
                                                   Foreground="#8DD1FF"/>
                                    </StackPanel>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,12,0,0">
                        <Button Content="+"
                                Style="{StaticResource SquareIconButton}"
                                Background="#0FB981"
                                Click="AddSchedule_Click"/>
                        <Button Content="â§‰"
                                Style="{StaticResource SquareIconButton}"
                                Background="#8E43FF"
                                Click="DuplicateSchedule_Click"/>
                        <Button Content="â€“"
                                Style="{StaticResource SquareIconButton}"
                                Background="#E74444"
                                Click="DeleteSchedule_Click"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- Editor -->
            <Border Grid.Column="1" Background="#252525" CornerRadius="10" Padding="20">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Width="Auto" x:Name="EditorPanel" IsEnabled="{Binding IsEditorEnabled}">
                        <Border Style="{StaticResource WidgetCardStyle}">
                            <StackPanel>
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                <StackPanel>
                                    <TextBlock Text="Schedule details"
                                               FontSize="20"
                                               FontWeight="SemiBold"
                                               Foreground="White"/>
                                    <TextBlock Text="Control cadence, connection and output."
                                               FontSize="12"
                                               Foreground="#B9B9B9"/>
                                </StackPanel>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="20,0,0,0">
                                    <CheckBox Content="Enabled"
                                              Margin="20,0,0,0"
                                              Foreground="#D0D0D0"
                                              IsChecked="{Binding SelectedSchedule.Enabled}"/>
                                <Button x:Name="RunNowButton"
                                        Content="â–¶ Run now"
                                        Margin="15,0,0,0"
                                        Padding="16,6"
                                        Background="#0D74DA"
                                        Foreground="White"
                                        FontWeight="Bold"
                                        BorderThickness="0"
                                        HorizontalContentAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        Cursor="Hand"
                                        Click="RunNow_Click"/>
                                    <Button x:Name="PauseButton"
                                            Content="{Binding PauseButtonLabel}"
                                            Margin="15,0,0,0"
                                        Padding="16,6"
                                        Background="#FFB300"
                                        Foreground="#141414"
                                        FontWeight="Bold"
                                        BorderThickness="0"
                                        Cursor="Hand"
                                        Visibility="{Binding IsBackupRunning, Converter={StaticResource BoolToVisibility}}"
                                        Click="PauseButton_Click"/>
                                <Button x:Name="ActiveTasksButton"
                                        Content="{Binding ActiveTasksLabel}"
                                        Margin="15,0,0,0"
                                        Padding="16,6"
                                        Background="#0FB981"
                                        Foreground="#0D0D0D"
                                        FontWeight="SemiBold"
                                        BorderThickness="0"
                                        Cursor="Hand"
                                        Click="OpenTasks_Click"/>
                                </StackPanel>
                            </StackPanel>

                                <Border Style="{StaticResource WidgetCardStyle}"
                                        Visibility="{Binding ShowBackupProgress, Converter={StaticResource BoolToVisibility}}">
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                        <ProgressBar Width="240"
                                                     Height="10"
                                                     Minimum="0"
                                                     Maximum="{Binding ProgressBarMaximum, Mode=OneWay}"
                                                     Value="{Binding ProcessedTables, Mode=OneWay}"/>
                                        <TextBlock Text="{Binding ProgressSummary}"
                                                   Foreground="#B0FFCF"
                                                   Margin="12,0,0,0"
                                                   FontWeight="SemiBold"/>
                                        <TextBlock Text="{Binding CurrentProgressText}"
                                                   Foreground="#DDDDDD"
                                                   Margin="12,0,0,0"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource WidgetCardStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Margin="0,0,20,0">
                                    <TextBlock Text="Schedule name" Foreground="#B0B0B0" FontSize="12"/>
                                    <TextBox Text="{Binding SelectedSchedule.Name}" Margin="0,6,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="Connection profile" Foreground="#B0B0B0" FontSize="12"/>
                                    <ComboBox ItemsSource="{Binding ConnectionProfiles}"
                                              SelectedValuePath="Id"
                                              DisplayMemberPath="DisplayName"
                                              SelectedValue="{Binding SelectedSchedule.ConnectionProfileId}"
                                              Margin="0,6,0,0"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border Style="{StaticResource WidgetCardStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Margin="0,0,20,0">
                                    <TextBlock Text="Database name" Foreground="#B0B0B0" FontSize="12"/>
                                    <DockPanel Margin="0,6,0,0">
                                        <ComboBox ItemsSource="{Binding DatabaseNames}"
                                                  Text="{Binding SelectedSchedule.DatabaseName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                  IsEditable="True"
                                                  Margin="0,0,10,0"
                                                  MinWidth="180"/>
                                        <Button Content="Refresh"
                                                Width="90"
                                                Style="{StaticResource SecondaryPillButton}"
                                                Background="#2D9CDB"
                                                Click="RefreshDatabases_Click"/>
                                    </DockPanel>
                                    <Border Background="#1B3A32" CornerRadius="6" Padding="8" Margin="0,8,0,0">
                                        <TextBlock Text="{Binding DatabaseStatus}"
                                                   FontSize="11"
                                                   Foreground="{Binding DatabaseStatusBrush}"/>
                                    </Border>
                                </StackPanel>
                                <StackPanel Grid.Column="1" Margin="0,0,20,0">
                                    <TextBlock Text="Frequency" Foreground="#B0B0B0" FontSize="12"/>
                                    <ComboBox ItemsSource="{Binding FrequencyOptions}"
                                              SelectedItem="{Binding SelectedSchedule.Frequency}"
                                              Margin="0,6,0,0"/>
                                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                                        <TextBlock Text="Mode:"
                                                   Foreground="#B0B0B0"
                                                   FontSize="12"
                                                   VerticalAlignment="Center"/>
                                    <ComboBox Width="160"
                                              Margin="10,0,0,0"
                                              ItemsSource="{Binding BackupModes}"
                                              DisplayMemberPath="Label"
                                              SelectedValuePath="Mode"
                                              SelectedValue="{Binding SelectedSchedule.BackupMode}"/>
                                    </StackPanel>
                                </StackPanel>
                                <StackPanel Grid.Column="2">
                                    <TextBlock Text="Run time" Foreground="#B0B0B0" FontSize="12"/>
                                    <mah:TimePicker SelectedDateTime="{Binding SelectedRunTime, Mode=TwoWay}"
                                                    Margin="0,6,0,0"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border x:Name="WeeklyPanelCard" Style="{StaticResource WidgetCardStyle}">
                            <StackPanel>
                                <TextBlock Text="Days of week" Foreground="#B0B0B0" FontSize="12"/>
                                <ItemsControl ItemsSource="{Binding WeekdaySelections}" Margin="0,8,0,0">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="4"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <ToggleButton Content="{Binding Label}"
                                                          Style="{StaticResource ToggleChipStyle}"
                                                          IsChecked="{Binding IsSelected, Mode=TwoWay}"/>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </Border>

                        <Border x:Name="MonthlyPanelCard" Style="{StaticResource WidgetCardStyle}">
                            <StackPanel>
                                <TextBlock Text="Day of month" Foreground="#B0B0B0" FontSize="12"/>
                                <mah:NumericUpDown Minimum="1"
                                                   Maximum="31"
                                                   Value="{Binding SelectedSchedule.DayOfMonth}"
                                                   Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>

                        <Border x:Name="CustomPanelCard" Style="{StaticResource WidgetCardStyle}">
                            <StackPanel>
                                <TextBlock Text="Interval (minutes)" Foreground="#B0B0B0" FontSize="12"/>
                                <mah:NumericUpDown Minimum="5"
                                                   Maximum="10080"
                                                   Value="{Binding SelectedSchedule.CustomIntervalMinutes}"
                                                   Margin="0,8,0,0"/>
                            </StackPanel>
                        </Border>

                        <Border Style="{StaticResource WidgetCardStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Margin="0,0,20,0">
                                    <TextBlock Text="Output directory" Foreground="#B0B0B0" FontSize="12"/>
                                    <DockPanel Margin="0,8,0,0">
                                        <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                            <Button Content="Browse"
                                                    Style="{StaticResource SecondaryPillButton}"
                                                    Background="#475569"
                                                    Margin="0,0,8,0"
                                                    Click="BrowseOutput_Click"/>
                                            <Button Content="Open"
                                                    Style="{StaticResource SecondaryPillButton}"
                                                    Background="#0FB981"
                                                    Click="OpenOutputFolder_Click"/>
                                        </StackPanel>
                                        <TextBox Text="{Binding SelectedSchedule.OutputDirectory}" Margin="0,0,10,0"/>
                                    </DockPanel>
                                    <TextBlock Text="{Binding BackupCountSummary}"
                                               FontSize="11"
                                               Foreground="#9CFFCB"
                                               Margin="0,6,0,0"/>
                                </StackPanel>
                                <StackPanel Grid.Column="1">
                                    <TextBlock Text="Retention copies" Foreground="#B0B0B0" FontSize="12"/>
                                    <mah:NumericUpDown Minimum="1"
                                                       Maximum="100"
                                                       Value="{Binding SelectedSchedule.RetentionCount}"
                                                       Margin="0,8,0,0"/>
                                    <CheckBox Content="Compress backup"
                                              Margin="0,12,0,0"
                                              IsChecked="{Binding SelectedSchedule.CompressOutput}"
                                              Foreground="#D0D0D0"/>
                                    <ComboBox ItemsSource="{Binding CompressionFormatOptions}"
                                              DisplayMemberPath="Label"
                                              SelectedValuePath="Format"
                                              SelectedValue="{Binding SelectedSchedule.CompressionFormat}"
                                              Margin="0,6,0,0"
                                              IsEnabled="{Binding SelectedSchedule.CompressOutput}"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border Style="{StaticResource WidgetCardStyle}">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                <TextBlock Text="{Binding SelectedScheduleSummary}"
                                           Foreground="#9CFFCB"
                                           VerticalAlignment="Center"
                                           Margin="0,0,20,0"/>
                                <Button Content="ðŸ’¾ Save schedules"
                                        Padding="24,8"
                                        Background="#007ACC"
                                        Foreground="White"
                                        FontWeight="Bold"
                                        BorderThickness="0"
                                        Cursor="Hand"
                                        Click="SaveSchedules_Click"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <Border Grid.Row="2"
                Background="#252525"
                CornerRadius="8"
                Padding="15"
                Margin="0,20,0,0">
            <StackPanel>
                <TextBlock Text="Activity log"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Foreground="White"/>
                <ListBox ItemsSource="{Binding RunLog}"
                         Margin="0,10,0,0"
                         Height="140"
                         Background="#1F1F1F"
                         BorderThickness="0"
                         ScrollViewer.VerticalScrollBarVisibility="Auto">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <TextBlock Text="{Binding Timestamp, StringFormat={}{0:HH:mm:ss}}"
                                           Foreground="#888888"
                                           Width="70"/>
                                <TextBlock Text="{Binding Message}" Margin="10,0,0,0">
                                    <TextBlock.Style>
                                        <Style TargetType="TextBlock">
                                            <Setter Property="Foreground" Value="#DDDDDD"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsError}" Value="True">
                                                    <Setter Property="Foreground" Value="#FF6B6B"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBlock.Style>
                                </TextBlock>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
                <TextBlock Text="Recent backups"
                           FontSize="15"
                           FontWeight="SemiBold"
                           Foreground="White"
                           Margin="0,20,0,6"/>
                <ListView ItemsSource="{Binding BackupHistory}"
                          Height="160"
                          Background="#151515"
                          BorderThickness="0"
                          Foreground="#DDDDDD">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Width="140" Header="When">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding CompletedUtc, StringFormat={}{0:G}}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Width="180" Header="Schedule">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding ScheduleName}" />
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                            <GridViewColumn Width="160" Header="Result">
                                <GridViewColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Message}">
                                            <TextBlock.Style>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="Foreground" Value="#9CFFCB"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Success}" Value="False">
                                                            <Setter Property="Foreground" Value="#FF6B6B"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </TextBlock.Style>
                                        </TextBlock>
                                    </DataTemplate>
                                </GridViewColumn.CellTemplate>
                            </GridViewColumn>
                        </GridView>
                    </ListView.View>
                </ListView>
                <Button Content="Open full history"
                        Margin="0,8,0,0"
                        Height="34"
                        HorizontalAlignment="Right"
                        Background="#333333"
                        Foreground="White"
                        BorderThickness="0"
                        Click="OpenHistoryButton_Click"/>
            </StackPanel>
        </Border>

    </Grid>
</Page>

