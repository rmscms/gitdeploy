<UserControl x:Class="GitDeployPro.Controls.TerminalControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid Background="#1E1E1E">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Toolbar -->
            <RowDefinition Height="*"/>    <!-- Terminal Output -->
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" Background="#252526" Padding="10,5" BorderBrush="#333333" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Connection Info -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="SSH Terminal" Foreground="White" FontWeight="Bold" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <Border x:Name="StatusIndicator" Width="10" Height="10" CornerRadius="5" Background="#555555" VerticalAlignment="Center" Margin="0,0,5,0"/>
                    <TextBlock x:Name="StatusText" Text="Disconnected" Foreground="#AAAAAA" VerticalAlignment="Center" FontSize="12"/>
                </StackPanel>

                <!-- Settings / Actions -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="ConnectButton" Content="ðŸ”Œ Connect" Click="ConnectButton_Click" 
                            Background="#007ACC" Foreground="White" BorderThickness="0" Padding="10,4" Margin="0,0,10,0" Cursor="Hand">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="3"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    
                    <Button x:Name="DetachButton" Content="ðŸ—– Pop-out" Click="DetachButton_Click"
                            Background="#333333" Foreground="#DDDDDD" BorderThickness="0" Padding="8,4" Margin="0,0,10,0" Cursor="Hand">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="3"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                    <Button x:Name="ClearButton" Content="ðŸ§¹ Clear" Click="ClearButton_Click"
                            Background="#333333" Foreground="#DDDDDD" BorderThickness="0" Padding="8,4" Margin="0,0,10,0" Cursor="Hand">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="3"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                    <ToggleButton x:Name="TypeToggleButton" Content="|" ToolTip="Type (Enable/Disable typing)"
                                  Width="32" Height="28" Margin="0,0,10,0"
                                  Background="#333333" Foreground="#DDDDDD" BorderThickness="0" Cursor="Hand"
                                  Checked="TypeToggleButton_Checked" Unchecked="TypeToggleButton_Unchecked"
                                  IsChecked="True">
                        <ToggleButton.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="3"/>
                            </Style>
                        </ToggleButton.Resources>
                        <ToggleButton.Style>
                            <Style TargetType="ToggleButton">
                                <Setter Property="Background" Value="#333333"/>
                                <Setter Property="Foreground" Value="#DDDDDD"/>
                                <Style.Triggers>
                                    <Trigger Property="IsChecked" Value="True">
                                        <Setter Property="Background" Value="#0FB981"/>
                                        <Setter Property="Foreground" Value="White"/>
                                    </Trigger>
                                    <Trigger Property="IsChecked" Value="False">
                                        <Setter Property="Background" Value="#E74444"/>
                                        <Setter Property="Foreground" Value="White"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </ToggleButton.Style>
                    </ToggleButton>

                    <ComboBox x:Name="FontSizeCombo" Width="50" SelectedIndex="2" SelectionChanged="FontSizeCombo_SelectionChanged" VerticalContentAlignment="Center">
                        <ComboBoxItem Content="10"/>
                        <ComboBoxItem Content="12"/>
                        <ComboBoxItem Content="14"/>
                        <ComboBoxItem Content="16"/>
                        <ComboBoxItem Content="18"/>
                        <ComboBoxItem Content="20"/>
                    </ComboBox>

                    <ComboBox x:Name="TextColorCombo" Width="80" SelectedIndex="0" Margin="10,0,0,0" SelectionChanged="TextColorCombo_SelectionChanged" VerticalContentAlignment="Center">
                        <ComboBoxItem Content="Gray" Tag="#D4D4D4"/>
                        <ComboBoxItem Content="White" Tag="#FFFFFF"/>
                        <ComboBoxItem Content="Green" Tag="#00FF00"/>
                        <ComboBoxItem Content="Cyan" Tag="#00FFFF"/>
                        <ComboBoxItem Content="Yellow" Tag="#FFFF00"/>
                    </ComboBox>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Terminal Screen -->
        <ScrollViewer x:Name="TerminalScroller"
                      Grid.Row="1"
                      VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled"
                      Background="#1E1E1E"
                      Padding="0,0,0,50">
            <RichTextBox x:Name="TerminalOutput" 
                         Background="#1E1E1E" 
                         Foreground="#D4D4D4" 
                         FontFamily="Consolas, Courier New, Monospace"
                         FontSize="14"
                         BorderThickness="0"
                         IsReadOnly="False"
                         IsDocumentEnabled="True"
                         CaretBrush="Lime"
                         PreviewKeyDown="TerminalOutput_PreviewKeyDown"
                         PreviewTextInput="TerminalOutput_PreviewTextInput"
                         Padding="10,10,10,60"
                         Margin="0,0,0,40">
                <RichTextBox.Resources>
                    <Style TargetType="{x:Type Paragraph}">
                        <Setter Property="Margin" Value="0"/>
                    </Style>
                </RichTextBox.Resources>
            </RichTextBox>
        </ScrollViewer>
    </Grid>
</UserControl>
